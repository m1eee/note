## rowhammer原理

DRAM位单元是一个存储电荷的电容器，电容器可能泄漏，并且读取过程本身具有破坏性。因此，电容器必须在读取后立即刷新其值，如果长时间不使用，则必须以某个预定频率刷新其值。DDR3 DRAM 规范保证至少64毫秒的保持时间， 即在此时间窗口内，一个rank（指的是内存模块中的一组存储芯片）内的所有存储单元都需要至少刷新一次。

当一条字线的电压反复切换时，附近行的一些单元会以快得多的速率泄漏电荷。 这些单元甚至无法保持电荷超过 64 毫秒（即它们被刷新的时间间隔），使单元丢失数据并出现干扰错误。

## 现象

![image-20250114214944761](C:\Users\MIE\AppData\Roaming\Typora\typora-user-images\image-20250114214944761.png)

* Code 1a导致许多位翻转，由于Code 1a不 向DRAM写入任何数据，我们得出结论，位翻转是干扰错误的体现。
* 仅从单个地址读取数据的 Code 1b，没有引发任何干扰错误。它所有的读取操作都是针对 DRAM 中的同一行。在这种情况下，内存控制器通过仅打开和关闭一次行来最小化 DRAM 命令的数量，同时在此期间发出许多列读取操作。DRAM干扰错误是由行的反复打开/关闭引起的，而不 是列读取操作，这是 Code 1b 不引发任何错误的原因。

干扰错误会破坏内存应提供的两个不变量：(i) 读访问不应修改任何地址的 数据；（ii） 写访问应仅修改被写入地址的数据。但只要一行被反复打开，读和写访问都会引发干扰错误



## 解决方案：

#### 1. PARA（概率相邻行激活，probabilistic adjacent row activation）

一种低开销的防止干扰错误的方法。每次切换字线时，PARA 以非常小的概率刷新附近行。PARA 的关键思想很 简单：每次打开和关闭一行时，其相邻的一行也会以一定 的低概率被打开（即刷新）。如果某一特定行碰巧被反复 打开和关闭，那么从统计学上可以肯定的是，该行的相邻 行最终也会被打开。PARA 的主要优点是无状态。PARA 不 需要昂贵的硬件数据结构来计算行被打开的次数，也不需 要存储攻击行/受害行的地址。

#### 2. ECC（error corrected code）

#### 3. TRR（target row refresh）

采用了一种特殊模块，从而可以跟踪记录内存中哪些行经常被激活，并且刷新这些激活行相邻行的值。

## DRAM结构

![image-20250114180342041](C:\Users\MIE\AppData\Roaming\Typora\typora-user-images\image-20250114180342041.png)

| **属性**     | **字线（Wordline）**       | **位线（Bitline）**      |
| ------------ | -------------------------- | ------------------------ |
| **方向**     | 水平，行方向               | 垂直，列方向             |
| **功能**     | 控制存储单元晶体管是否导通 | 传输存储单元中的数据     |
| **作用范围** | 激活一行存储单元           | 连接一列存储单元         |
| **触发条件** | 由存储控制器选择激活       | 根据数据读写需求传输电荷 |

要读取 **1 bit 数据**，需要同时用到 **字线** 和 **位线**，它们各自发挥不同的作用：

### **过程解析**：

1. **激活字线（Wordline）**：

   - 存储控制器选择要读取的存储单元所在的行。
   - 激活对应的 **字线**，使这一行上连接的晶体管导通。
   - 导通的晶体管将存储单元的电容与 **位线** 相连。

2. **传输数据通过位线（Bitline）**：

   - 与存储单元相连的电容的电荷通过 **位线** 传输到放大器。

   - 放大器感知到 **位线** 上的微弱电压变化，并将其解读为 **0 或 1**

     

（DRAM）中存储的电荷不是持久 的。这是由于各种泄漏机制，电荷可以通过这些机制分散： 例如，亚阈值泄漏[56]和栅极诱导漏极泄漏[57]。最终，存 储单元的电荷水平会偏离噪声容限，导致数据丢失——换 句话说，一个存储单元的保持时间有限。在此时间到期之前， 必须将存储单元的电荷恢复到其初始值：完全充电或完全 放电。